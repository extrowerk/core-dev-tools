# put this in if you want g++ to use the Dinkum lib
#T_CFLAGS = -D__QNXTARGET__ -DLIBSTDCXX=\"-lcpp\"
T_CFLAGS = -D__QNXTARGET__
CROSS_LIBGCC1 = libgcc1-asm.a
LIB1ASMSRC = sh/lib1nto.asm
LIB1ASMFUNCS = _ashiftrt _ashiftrt_n _ashiftlt _lshiftrt _movstr \
  _movstr_i4 _mulsi3 _sdivsi3 _sdivsi3_i4 _udivsi3 _udivsi3_i4 _set_fpscr

TARGET_LIBGCC2_CFLAGS = -fno-honor-std

# These are really part of libgcc1, but this will cause them to be
# built correctly, so...

LIB2FUNCS_EXTRA = fp-bit.c dp-bit.c $(srcdir)/config/sh/divdi.c

dp-bit.c: $(srcdir)/config/fp-bit.c
	echo '#ifdef __LITTLE_ENDIAN__' > dp-bit.c
	echo '#define FLOAT_BIT_ORDER_MISMATCH' >>dp-bit.c
	echo '#endif' 		>> dp-bit.c
	cat $(srcdir)/config/fp-bit.c >> dp-bit.c

fp-bit.c: $(srcdir)/config/fp-bit.c
	echo '#define FLOAT' > fp-bit.c
	echo '#ifdef __LITTLE_ENDIAN__' >> fp-bit.c
	echo '#define FLOAT_BIT_ORDER_MISMATCH' >>fp-bit.c
	echo '#endif' 		>> fp-bit.c
	cat $(srcdir)/config/fp-bit.c >> fp-bit.c

FIXPROTO_DEFINES = -D__QNX__ -D__QNXNTO__ -D__SH__ -D__GNUC__

MULTILIB_OPTIONS= fpic fexceptions
MULTILIB_DIRNAMES= 
MULTILIB_MATCHES =

LIBGCC = stmp-multilib
INSTALL_LIBGCC = install-multilib

USER_H = $(EXTRA_HEADERS) $(LANG_EXTRA_HEADERS)

EXTRA_PARTS = crtbeginC++.o crtendC++.o

$(T)crtbeginC++.o: crtbegin.o
	cp crtbegin.o crtbeginC++.o

$(T)crtendC++.o: crtend.o
	cp crtend.o crtendC++.o

